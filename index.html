<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio</title>
    <!-- Bootstrap CSS -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">

</head>
<body>
    <header>
        <nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top shadow-sm">
            <a class="navbar-brand" href="#home">SHEMA Roger</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#home">HOME</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#about">ABOUT ME</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#portfolio">PORTFOLIO</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#blogs">BLOGS</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#contact">CONTACT ME</a>
                    </li>
                </ul>
            </div>
        </nav>
    </header>

    <!-- Optional JavaScript; choose one of the two! -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <main>
         <section id="home" class="home py-5">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-6 text-center text-md-left">
                    <div class="soft mb-4">
                        <h4>SOFTWARE ENGINEERING</h4>
                    </div>
                    <div class="container-text mb-4">
                        <div class="f-text">
                            <p>I can help your business to</p>
                        </div>
                        <div class="l-text">
                            <h1>Get online and <br>grow fast.</h1>
                        </div>
                    </div>
                    <div class="join-text">
                        <button class="btn btn-primary">
                            <a href="#contact" class="text-white text-decoration-none">Schedule free online meeting</a>
                        </button>
                    </div>
                </div>
                <div class="col-md-6 text-center">
                    <div class="card">
                        <div class="image">
                            <img src="image/shema.png" alt="SHEMA Roger" class="img-fluid">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
        <section id="about">
            <div class="about-text">
                <h1>As a passionate software engineer, I specialize in <br>
                crafting high-quality software solutions using a <br>
                diverse range of technologies. My key areas of <br>
                expertise include:</h1>
                <h2>
                C#: Utilizing the .NET framework to develop robust and scalable applications.<br>
                JavaScript: Creating dynamic, interactive web interfaces with cutting-edge JavaScript frameworks.<br>
                Java: Building versatile applications suitable for various platforms, from desktop to enterprise environments.<br>
                React: Designing responsive, user-friendly web applications with React.js.<br>
                Spring Boot: Developing powerful, efficient back-end services and RESTful APIs.<br>
                Linux: Managing system administration and shell scripting to ensure efficient and secure software deployments.
                </h2>
                <h3>
                I thrive in team-oriented environments and am always eager to embrace new technologies and methodologies.<br> 
                My goal is to continually enhance my skills and contribute to impactful projects that make a difference.
                </h3>
            </div>
        </section>
       <section id="portfolio">
    <h1>PORTFOLIO</h1>
    <div class="portfolio-grid">
        <div class="portfolio-row">
            <div class="portfolio-card voting-bg">
                <img src="image/voting-card.jpeg" alt="Project 1">
                <h4>Voting management system</h4>
                <p>A voting system is a secure platform for casting, managing, and tallying votes, ensuring accuracy and transparency in elections.</p>
                <h4>Duration: 2 weeks</h4>
                <button><a href="https://github.com/shemaroger/Voting">Visit Me</a></button>
            </div>
            <div class="portfolio-card market-bg">
                <img src="image/supper-market.jpeg" alt="Project 2">
                <h4>Super market website</h4>
                <p>A supermarket website allows customers to browse, purchase groceries, and household items online, offering convenience and home delivery services.</p>
                <h4>Duration: 4 weeks</h4>
                <button><a href="https://github.com/shemaroger/SimbaSupperMarket">Visit Me</a></button>
            </div>
            <div class="portfolio-card harvest-bg">
                <img src="image/Havest-mgt.jpeg" alt="Project 3">
                <h4>Harvest management system</h4>
                <p>A harvest management system optimizes the planning, tracking, and reporting of crop yields, ensuring efficient and sustainable agricultural practices.</p>
                <h4>Duration: 4 weeks</h4>
                <button><a href="https://github.com/shemaroger/Harvest-">Visit Me</a></button>
            </div>
        </div>
        <div class="portfolio-row">
            <div class="portfolio-card event-bg">
                <img src="image/sit-reservation.jpeg" alt="Project 4">
                <h4>Event sits reservation system</h4>
                <p>An event site reservation system enables users to book, manage, and organize event venues and seating arrangements efficiently and conveniently.</p>
                <h4>Duration: 3 weeks</h4>
                <button><a href="https://github.com/shemaroger/Event-sits-reservation">Visit Me</a></button>
            </div>
            <div class="portfolio-card guard-bg">
                <img src="image/security.jpeg" alt="Project 5">
                <h4>Guards deployment solution</h4>
                <p>A guards deployment solution streamlines the scheduling, tracking, and management of security personnel, ensuring optimal coverage and efficiency.</p>
                <h4>Duration: 5 weeks</h4>
                <button><a href="https://github.com/shemaroger/Guard-deployment">Visit Me</a></button>
            </div>
            <div class="portfolio-card ecommerce-bg">
                <img src="image/shop.jpeg" alt="Project 6">
                <h4>E-commerce</h4>
                <p>An e-commerce platform enables businesses to sell products and services online, providing a convenient and secure shopping experience for customers.</p>
                <h4>Duration: 7 weeks</h4>
                <button><a href="https://github.com/shemaroger/art-ecommerce">Visit Me</a></button>
            </div>
            
        </div>
    </div>
</section>

        <section class="blogs" id="blogs">
            <h1>BLOGS</h1>
<div id="blogContainer"></div>

   <script>
    // Retrieve token from localStorage
    const token = localStorage.getItem('token');

    // Fetch Blogs
    async function fetchBlogs() {
        try {
            const response = await fetch('https://my-blogs-hfeb.onrender.com/api/blogs');

            if (!response.ok) throw new Error('Failed to fetch blogs');

            const blogs = await response.json();
            const blogContainer = document.getElementById('blogContainer');
            blogContainer.innerHTML = '';

            blogs.forEach(blog => {
                const card = document.createElement('div');
                card.className = 'blog-card';
                card.dataset.id = blog._id;

                // Check if user is logged in (token exists)
                const likeAction = token ? `<span class="like" onclick="toggleLike('${blog._id}', this)">‚ù§ Like (<span class="like-count">${blog.likes.length || 0}</span>)</span>` : '';
                const commentAction = `
                    <span class="comment" onclick="toggleComments('${blog._id}')">üí¨ Comments (<span class="comment-count">${blog.comments.length || 0}</span>)</span>
                `;
                const commentSection = token ? `
                    <div class="comment-section" style="display: none;">
                        <form class="comment-form" onsubmit="addComment(event, '${blog._id}')">
                            <textarea name="content" placeholder="Add a comment" required></textarea>
                            <button type="submit">Post Comment</button>
                        </form>
                        <ul class="comment-list"></ul>
                    </div>
                ` : '';

                card.innerHTML = `
                    <img src="${blog.image || '/api/placeholder/420/300'}" alt="Blog post image" class="blog-card-image">
                    <div class="blog-content">
                        <h2 class="blog-card-title">${blog.title}</h2>
                        <p class="blog-card-excerpt">${blog.content.substring(0, 150)}...</p>
                        <h3 class="blog-card-date">${new Date(blog.date).toLocaleDateString()}</h3>
                        <div class="blog-actions">
                            ${likeAction}
                            ${commentAction}
                        </div>
                        ${commentSection}
                    </div>
                `;
                
                blogContainer.appendChild(card);
            });
        } catch (error) {
            console.error('Error:', error);
        }
    }

    // Toggle Comments Visibility and Fetch on Demand
    function toggleComments(blogId) {
        // Check if user is logged in
        if (!token) {
            alert('You must be logged in to view or add comments.');
            window.location.href = 'login.html'; // Redirect to login page
            return;
        }

        const commentSection = document.querySelector(`[data-id="${blogId}"] .comment-section`);
        const isHidden = commentSection.style.display === 'none';
        
        if (isHidden) {
            fetchComments(blogId);
        }
        
        commentSection.style.display = isHidden ? 'block' : 'none';
    }

    // Fetch Comments for a Blog
    async function fetchComments(blogId) {
        try {
            const response = await fetch(`https://my-blogs-hfeb.onrender.com/api/blogs/${blogId}/comments`, {
                headers: { 'Authorization': `Bearer ${token}` }
            });

            if (!response.ok) throw new Error('Failed to fetch comments');

            const comments = await response.json();
            const commentList = document.querySelector(`[data-id="${blogId}"] .comment-list`);
            const commentCount = document.querySelector(`[data-id="${blogId}"] .comment-count`);
            commentCount.textContent = comments.length;

            commentList.innerHTML = comments.map(comment => `
                <li class="comment-item">
                    <p>${comment.content}</p>
                </li>
            `).join('');
        } catch (error) {
            console.error('Error fetching comments:', error);
        }
    }

    // Add a Comment to a Blog
async function addComment(event, blogId) {
    event.preventDefault();
    const form = event.target;
    const content = form.content.value.trim(); // Trim whitespace from the comment

    // Check if user is logged in
    if (!token) {
        alert('You must be logged in to comment');
        window.location.href = 'login.html'; // Redirect to login page if not logged in
        return;
    }

    // Check if the comment is empty
    if (content === '') {
        alert('Comment cannot be empty');
        return;
    }

    console.log("Posting comment:", content);

    try {
        const response = await fetch(`https://my-blogs-hfeb.onrender.com/api/blogs/${blogId}/comments`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${token}` // Use Bearer token for authentication
            },
            body: JSON.stringify({ content }) // Sending comment content in the request body
        });

        console.log("Response status:", response.status);

        // Handle non-OK responses
        if (response.status === 401) {
            alert('You are not authorized. Please log in again.');
            window.location.href = 'login.html'; // Redirect to login if unauthorized
            return;
        } else if (response.status === 404) {
            alert('Blog post not found.');
            return;
        } else if (!response.ok) {
            const errorResponse = await response.json();
            console.error("Error response:", errorResponse);
            throw new Error('Failed to add comment');
        }

        // If comment is successfully posted, clear the form and refresh comments
        form.reset();
        fetchComments(blogId); // Refresh comments after successful post
    } catch (error) {
        console.error('Error adding comment:', error);
        alert('Failed to post comment. Please try again.');
    }
}


    // Like/Unlike a Blog
    async function toggleLike(blogId, likeElement) {
        if (!token) {
            alert('You must be logged in to like/unlike the blog');
            window.location.href = 'login.html'; // Redirect to login page
            return;
        }

        try {
            const response = await fetch(`https://my-blogs-hfeb.onrender.com/api/blogs/${blogId}/like`, {
                method: 'POST',
                headers: {
                    'Authorization': `Bearer ${token}`
                }
            });

            if (!response.ok) throw new Error('Failed to like/unlike blog');

            const result = await response.json();
            const likeCountElement = likeElement.querySelector('.like-count');
            likeCountElement.textContent = result.likes;

            if (result.message === 'Blog liked') {
                likeElement.classList.add('liked');
            } else {
                likeElement.classList.remove('liked');
            }
        } catch (error) {
            console.error('Error liking/unliking blog:', error);
            alert('Failed to like/unlike blog. Please try again later.');
        }
    }

    // Initialize blog fetching on page load
    document.addEventListener('DOMContentLoaded', fetchBlogs);
</script>




        </section>
        
       <section id="contact">
       <div class="contact-header">
    <h1>Schedule Free Online Meeting</h1>
    </div>
    <form class="contact-form">
        <div class="form-group">
            <label for="name">Name:</label>
            <input type="text" id="name" name="name" required>
        </div>
        <div class="form-group">
            <label for="email">Email:</label>
            <input type="email" id="email" name="email" required>
        </div>
        <div class="form-group">
            <label for="comment">Comment:</label>
            <textarea id="comment" name="comment" rows="4" required></textarea>
        </div>
        <button type="submit">Contact me</button>
    </form>
   
</section>

    </main>
 <footer>
    <div class="footer-content">
        <div class="email">
            <h3>
                <img src="icons/icons8-email-80.png" alt="Email Icon">
                shemaroger43@gmail.com
                <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <!-- Adjust spacing as needed -->
                <a href="#blogs">Blogs</a>
            </h3>
        </div>
        <div class="design">
            <!-- Add design or additional content here -->
        </div>
    </div>
</footer>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        function adjustPortfolioCards() {
            var cards = document.querySelectorAll('.portfolio-card');
            if (window.innerWidth < 768) {
                // Show fewer cards on smaller screens
                cards.forEach(function(card, index) {
                    if (index >= 6) { // Show only up to 6 cards
                        card.style.display = 'none';
                    } else {
                        card.style.display = 'block';
                    }
                });
            } else {
                // Show all cards on larger screens
                cards.forEach(function(card) {
                    card.style.display = 'block';
                });
            }
        }

        function adjustFooter() {
            var email = document.querySelector('.email');
            if (window.innerWidth < 768) {
                email.style.flexDirection = 'column';
                email.querySelector('a').style.marginTop = '10px';
            } else {
                email.style.flexDirection = 'row';
                email.querySelector('a').style.marginTop = '0';
            }
        }

        window.addEventListener('resize', function() {
            adjustPortfolioCards();
            adjustFooter();
        });

        // Initial adjustments
        adjustPortfolioCards();
        adjustFooter();
    });
</script>

</body>
</html>
