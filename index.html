<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio</title>
    <!-- Bootstrap CSS -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.5/font/bootstrap-icons.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">

</head>
<body>
    <header>
        <nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top shadow-sm">
            <a class="navbar-brand" href="#home">SHEMA Roger</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#home">HOME</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#about">ABOUT ME</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#portfolio">PORTFOLIO</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#blogs">BLOGS</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#contact">CONTACT ME</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="login.html">LOGIN</a>
                    </li>
                </ul>
            </div>
        </nav>
    </header>

    <!-- Optional JavaScript; choose one of the two! -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <main>
         <section id="home" class="home py-5">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-6 text-center text-md-left">
                    <div class="soft mb-4">
                        <h4>SOFTWARE ENGINEERING</h4>
                    </div>
                    <div class="container-text mb-4">
                        <div class="f-text">
                            <p>I can help your business to</p>
                        </div>
                        <div class="l-text">
                            <h1>Get online and <br>grow fast.</h1>
                        </div>
                    </div>
                    <div class="join-text">
                        <button class="btn btn-primary">
                            <a href="#contact" class="text-white text-decoration-none">Schedule free online meeting</a>
                        </button>
                    </div>
                </div>
                <div class="col-md-6 text-center">
                    <div class="card">
                        <div class="image">
                            <img src="image/shema.png" alt="SHEMA Roger" class="img-fluid">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
        <section id="about">
            <div class="about-text">
                <h1>As a passionate software engineer, I specialize in <br>
                crafting high-quality software solutions using a <br>
                diverse range of technologies. My key areas of <br>
                expertise include:</h1>
                <h2>
                C#: Utilizing the .NET framework to develop robust and scalable applications.<br>
                JavaScript: Creating dynamic, interactive web interfaces with cutting-edge JavaScript frameworks.<br>
                Java: Building versatile applications suitable for various platforms, from desktop to enterprise environments.<br>
                React: Designing responsive, user-friendly web applications with React.js.<br>
                Spring Boot: Developing powerful, efficient back-end services and RESTful APIs.<br>
                Linux: Managing system administration and shell scripting to ensure efficient and secure software deployments.
                </h2>
                <h3>
                I thrive in team-oriented environments and am always eager to embrace new technologies and methodologies.<br> 
                My goal is to continually enhance my skills and contribute to impactful projects that make a difference.
                </h3>
            </div>
        </section>
       <section id="portfolio" class="py-5">
        <div class="container">
            <h2 class="section-title text-center mb-5">My Portfolio</h2>
            <div class="row g-4">
                <div class="col-md-6 col-lg-4">
                    <div class="card portfolio-card h-100">
                        <img src="image/voting-card.jpeg" class="card-img-top" alt="Voting Management System">
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title">Voting Management System</h5>
                            <p class="card-text flex-grow-1">A secure platform for casting, managing, and tallying votes, ensuring accuracy and transparency in elections.</p>
                            <div class="d-flex justify-content-between align-items-center mt-3">
                                <small class="text-muted"><i class="fas fa-clock"></i> 2 weeks</small>
                                <a href="https://github.com/shemaroger/Voting" class="btn btn-primary">View Project</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-lg-4">
                    <div class="card portfolio-card h-100">
                        <img src="image/supper-market.jpeg" class="card-img-top" alt="Super Market Website">
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title">Super Market Website</h5>
                            <p class="card-text flex-grow-1">An online platform for browsing and purchasing groceries and household items, offering convenience and home delivery services.</p>
                            <div class="d-flex justify-content-between align-items-center mt-3">
                                <small class="text-muted"><i class="fas fa-clock"></i> 4 weeks</small>
                                <a href="https://github.com/shemaroger/SimbaSupperMarket" class="btn btn-primary">View Project</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-lg-4">
                    <div class="card portfolio-card h-100">
                        <img src="image/Havest-mgt.jpeg" class="card-img-top" alt="Harvest Management System">
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title">Harvest Management System</h5>
                            <p class="card-text flex-grow-1">A system for optimizing the planning, tracking, and reporting of crop yields, ensuring efficient and sustainable agricultural practices.</p>
                            <div class="d-flex justify-content-between align-items-center mt-3">
                                <small class="text-muted"><i class="fas fa-clock"></i> 4 weeks</small>
                                <a href="https://github.com/shemaroger/Harvest-" class="btn btn-primary">View Project</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-lg-4">
                    <div class="card portfolio-card h-100">
                        <img src="image/sit-reservation.jpeg" class="card-img-top" alt="Event Sits Reservation System">
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title">Event Sits Reservation System</h5>
                            <p class="card-text flex-grow-1">A system enabling users to book, manage, and organize event venues and seating arrangements efficiently and conveniently.</p>
                            <div class="d-flex justify-content-between align-items-center mt-3">
                                <small class="text-muted"><i class="fas fa-clock"></i> 3 weeks</small>
                                <a href="https://github.com/shemaroger/Event-sits-reservation" class="btn btn-primary">View Project</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-lg-4">
                    <div class="card portfolio-card h-100">
                        <img src="image/security.jpeg" class="card-img-top" alt="Guards Deployment Solution">
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title">Guards Deployment Solution</h5>
                            <p class="card-text flex-grow-1">A solution for streamlining the scheduling, tracking, and management of security personnel, ensuring optimal coverage and efficiency.</p>
                            <div class="d-flex justify-content-between align-items-center mt-3">
                                <small class="text-muted"><i class="fas fa-clock"></i> 5 weeks</small>
                                <a href="https://github.com/shemaroger/Guard-deployment" class="btn btn-primary">View Project</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-lg-4">
                    <div class="card portfolio-card h-100">
                        <img src="image/shop.jpeg" class="card-img-top" alt="E-commerce Platform">
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title">E-commerce Platform</h5>
                            <p class="card-text flex-grow-1">An online platform enabling businesses to sell products and services, providing a convenient and secure shopping experience for customers.</p>
                            <div class="d-flex justify-content-between align-items-center mt-3">
                                <small class="text-muted"><i class="fas fa-clock"></i> 7 weeks</small>
                                <a href="https://github.com/shemaroger/art-ecommerce" class="btn btn-primary">View Project</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
<section class="blogs" id="blogs">
    <div class="container">
        <h1 class="my-4">BLOGS</h1>
        <div id="blogContainer"></div>

        <!-- Comment Modal -->
        <div class="modal fade" id="commentModal" tabindex="-1" aria-labelledby="commentModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="commentModalLabel">Comments</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <!-- Comments will be displayed here -->
                        <div id="commentsContainer" class="comments-container mb-3"></div>
                        <!-- Add Comment Form -->
                        <form id="addCommentForm">
                            <div class="mb-3">
                                <label for="commentContent" class="form-label">Add a comment</label>
                                <textarea class="form-control" id="commentContent" rows="2" required></textarea>
                            </div>
                            <button type="submit" class="btn btn-primary">Post</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bootstrap Icons CDN -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">

        <!-- JavaScript -->
        <script>
            const token = localStorage.getItem('token');

            // Function to check if user is logged in
            function isUserLoggedIn() {
                return token && !isTokenExpired(token);
            }

            // Token validation for logged-in users
            function isTokenExpired(token) {
                try {
                    const payloadBase64 = token.split('.')[1];
                    const decodedPayload = JSON.parse(atob(payloadBase64));
                    const currentTime = Math.floor(Date.now() / 1000);
                    return decodedPayload.exp < currentTime;
                } catch (error) {
                    console.error('Error decoding token:', error);
                    return true;
                }
            }

            // Redirect to login if user is not logged in
            function redirectToLogin() {
                window.location.href = 'login.html';
            }

            async function fetchBlogs() {
                try {
                    const response = await fetch('https://my-blogs-hfeb.onrender.com/api/blogs');
                    const blogs = await response.json();
                    displayBlogs(blogs);
                } catch (error) {
                    console.error('Error fetching blogs:', error);
                }
            }

            function displayBlogs(blogs) {
                const blogContainer = document.getElementById('blogContainer');
                blogContainer.innerHTML = '';
                blogs.forEach(blog => {
                    const card = document.createElement('div');
                    card.className = 'blog-card';
                    card.dataset.id = blog._id;
                    card.innerHTML = `
                        <img src="${blog.image || 'https://via.placeholder.com/420x300'}" alt="Blog post image" class="blog-card-image">
                        <div class="blog-content">
                            <h2 class="blog-card-title">${blog.title}</h2>
                            <p class="blog-card-excerpt">${blog.content.substring(0, 150)}...<br /><br /></p>
                            
                            <h3 class="blog-card-date">${new Date(blog.date).toLocaleDateString()}</h3>
                            ${renderLikeAndCommentButtons(blog)}
                            <a href="blog-detail.html?id=${blog._id}" class="btn btn-secondary">Read More</a></p>
                        </div>
                    `;
                    blogContainer.appendChild(card);
                });
            }

            // Render Like & Comment buttons for both visitors and logged-in users
            function renderLikeAndCommentButtons(blog) {
                return `
                    <button class="btn btn-primary icon-button" onclick="handleLike('${blog._id}')">
                        <i class="bi bi-heart"></i> <span id="likes-count-${blog._id}">${blog.likes.length}</span>
                    </button>
                    <button class="btn btn-info icon-button" onclick="handleComment('${blog._id}')">
                        <i class="bi bi-chat-dots"></i> Comment
                    </button>
                `;
            }

            // Handle like click for both visitors and logged-in users
            function handleLike(blogId) {
                if (!isUserLoggedIn()) {
                    redirectToLogin();
                } else {
                    toggleLike(blogId);
                }
            }

            // Handle comment click for both visitors and logged-in users
            function handleComment(blogId) {
                if (!isUserLoggedIn()) {
                    redirectToLogin();
                } else {
                    openCommentModal(blogId);
                }
            }

            // Toggle like for logged-in users only
            async function toggleLike(blogId) {
                try {
                    const response = await fetch(`https://my-blogs-hfeb.onrender.com/api/blogs/${blogId}/like`, {
                        method: 'POST',
                        headers: {
                            'Authorization': ` ${token}`
                        }
                    });

                    const result = await response.json();
                    document.querySelector(`#likes-count-${blogId}`).textContent = `${result.likes} Likes`;
                } catch (error) {
                    console.error('Error toggling like:', error);
                }
            }

            // Load comments for a specific blog
            async function loadComments(blogId) {
                try {
                    const response = await fetch(`https://my-blogs-hfeb.onrender.com/api/blogs/${blogId}/comments`);
                    const comments = await response.json();
                    displayComments(comments);
                } catch (error) {
                    console.error('Error loading comments:', error);
                }
            }

            function displayComments(comments) {
    const commentsContainer = document.getElementById('commentsContainer');
    commentsContainer.innerHTML = '';
    comments.forEach(comment => {
        console.log(comment.timestamp); // Debugging line
        const date = new Date(comment.timestamp);
        const formattedDate = isNaN(date) ? 'Invalid date' : date.toLocaleString();
        
        const commentDiv = document.createElement('div');
        commentDiv.className = 'comment';
        commentDiv.innerHTML = `
            <div class="d-flex align-items-start">
                <i class="bi bi-person comment-icon"></i>
                <div class="comment-body ms-2">
                    <div class="comment-author">${comment.author?.email || 'Anonymous'}</div>
                    <div class="comment-text">${comment.content}</div>
                    
                </div>
            </div>
        `;
        commentsContainer.appendChild(commentDiv);
    });
}


            // Add comment for logged-in users only
            async function addComment(blogId, commentContent) {
                try {
                    const response = await fetch(`https://my-blogs-hfeb.onrender.com/api/blogs/${blogId}/comments`, {
                        method: 'POST',
                        headers: {
                            'Authorization': ` ${token}`,
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({ content: commentContent })
                    });

                    loadComments(blogId);
                    $('#commentModal').modal('hide');
                } catch (error) {
                    console.error('Error adding comment:', error);
                }
            }

            // Open comment modal for logged-in users only
            function openCommentModal(blogId) {
                $('#commentModal').modal('show');
                document.getElementById('addCommentForm').onsubmit = function(event) {
                    event.preventDefault();
                    const commentContent = document.getElementById('commentContent').value.trim();
                    addComment(blogId, commentContent);
                };
                loadComments(blogId);
            }

            fetchBlogs();
        </script>
    </div>
</section>
    <!-- Bootstrap JS and dependencies -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>    
       <section id="contact">
       <div class="contact-header">
    <h1>Schedule Free Online Meeting</h1>
    </div>
    <form class="contact-form">
        <div class="form-group">
            <label for="name">Name:</label>
            <input type="text" id="name" name="name" required>
        </div>
        <div class="form-group">
            <label for="email">Email:</label>
            <input type="email" id="email" name="email" required>
        </div>
        <div class="form-group">
            <label for="comment">Comment:</label>
            <textarea id="comment" name="comment" rows="4" required></textarea>
        </div>
        <button type="submit">Contact me</button>
    </form>
   
</section>

    </main>
 <footer>
    <div class="footer-content">
        <div class="email">
            <h3>
                <img src="icons/icons8-email-80.png" alt="Email Icon">
                shemaroger43@gmail.com
                <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <!-- Adjust spacing as needed -->
                <a href="#blogs">Blogs</a>
            </h3>
        </div>
        <div class="design">
            <!-- Add design or additional content here -->
        </div>
    </div>
</footer>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        function adjustPortfolioCards() {
            var cards = document.querySelectorAll('.portfolio-card');
            if (window.innerWidth < 768) {
                // Show fewer cards on smaller screens
                cards.forEach(function(card, index) {
                    if (index >= 6) { // Show only up to 6 cards
                        card.style.display = 'none';
                    } else {
                        card.style.display = 'block';
                    }
                });
            } else {
                // Show all cards on larger screens
                cards.forEach(function(card) {
                    card.style.display = 'block';
                });
            }
        }

        function adjustFooter() {
            var email = document.querySelector('.email');
            if (window.innerWidth < 768) {
                email.style.flexDirection = 'column';
                email.querySelector('a').style.marginTop = '10px';
            } else {
                email.style.flexDirection = 'row';
                email.querySelector('a').style.marginTop = '0';
            }
        }

        window.addEventListener('resize', function() {
            adjustPortfolioCards();
            adjustFooter();
        });

        // Initial adjustments
        adjustPortfolioCards();
        adjustFooter();
    });
</script>

</body>
</html>
